<html>
<head>
  <title>Bulbashow</title>
  <style type="text/css">
    body {
      background: #77AC98;
      padding: 0 0 0 0;
      margin: 0 0 0 0;
      overflow: hidden;
    }

    iframe {
      display: none;
      max-width: 256px;
      max-height: 64px;
    }

    div {
      padding: 0 0 0 0;
      margin: 0 0 0 0;
    }

    #bg_slideshow img {
      z-index: -1;
      width: 100%;
      height: 100%;
      overflow: hidden;
      display: block;
      position: absolute;
      margin: 0 0 0 0;
      padding: 0 0 0 0;
    }

    #pkmns_slideshow img {
      z-index: 100;
      position: absolute;
      overflow: hidden;
    }

    img {
      overflow: hidden;
    }

    #bg_slideshow {
      overflow: hidden;
    }
    #pkmns_slideshow {
      overflow: hidden;
    }
  </style>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js" ></script>
  <script src="http://jquery-ui.googlecode.com/svn/tags/latest/ui/jquery.effects.core.js"></script>
  <script src="http://jquery-ui.googlecode.com/svn/tags/latest/ui/jquery.effects.slide.js"></script>
  <script src="https://w.soundcloud.com/player/api.js" type="text/javascript" ></script>
</head>
<body>



  <iframe id="sc-widget" width="100%" height="166" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=http%3A%2F%2F"></iframe>

  <div id="pkmns_slideshow">
  </div>

  <div id="bg_slideshow">
  </div>

  <script type="text/javascript">
    (function() {

      var names = [
        'bulbasaur', 'ivysaur', 'venusaur', 'charmander', 'charmeleon',
        'charizard', 'squirtle', 'wartortle', 'blastoise', 'caterpie',
        'metapod', 'butterfree', 'weedle', 'kakuna', 'beedrill', 'pidgey',
        'pidgeotto', 'pidgeot', 'rattata', 'raticate', 'spearow', 'fearow',
        'ekans', 'arbok', 'pikachu', 'raichu', 'sandshrew', 'sandslash', 'nidoranf',
        'nidorina', 'nidoqueen', 'nidoranm', 'nidorino', 'nidoking', 'clefairy',
        'clefable', 'vulpix', 'ninetales', 'jigglypuff', 'wigglytuff', 'zubat' , 'golbat',
        'oddish', 'gloom', 'vileplume', 'paras', 'parasect', 'venonat', 'venomoth',
        'diglett', 'dugtrio', 'meowth', 'persian', 'psyduck', 'golduck', 'mankey',
        'primeape', 'growlithe', 'arcanine', 'poliwag', 'poliwhirl', 'poliwrath',
        'abra', 'kadabra', 'alakazam', 'machop', 'machoke', 'machamp', 'bellsprout',
        'weepinbell', 'victreebel', 'tentacool', 'tentacruel', 'geodude', 'graveler',
        'golem', 'ponyta', 'rapidash', 'slowpoke', 'slowbro', 'magnemite', 'magneton',
        'farfetchd', 'doduo', 'dodrio', 'seel', 'dewgong', 'grimer', 'muk', 'shellder',
        'cloyster', 'gastly', 'haunter', 'gengar', 'onix', 'drowzee', 'hypno',
        'krabby', 'kingler', 'voltorb', 'electrode', 'exeggcute', 'exeggutor',
        'cubone', 'marowak', 'hitmonlee', 'hitmonchan', 'lickitung', 'koffing',
        'weezing', 'rhyhorn', 'rhydon', 'chansey' ,'tangela', 'kangaskhan',
        'horsea', 'seadra', 'goldeen', 'seaking', 'staryu', 'starmie',
        'mrmime', 'scyther', 'jynx', 'electabuzz', 'magmar', 'pinsir', 'tauros',
        'magikarp', 'gyarados', 'lapras', 'ditto', 'eevee', 'vaporeon',
        'jolteon', 'flareon', 'poryogon', 'omanyte', 'omastar', 'kabuto',
        'kabutops', 'aerodactyl', 'snorlax', 'articuno', 'zapdos', 'moltres',
        'dratini', 'dragonair', 'dragonite', 'mewtwo', 'mew'
      ];

      var bg_root = 'http://media.pldh.net/gallery/the493/';
      var pkmn_root = 'http://media.pldh.net/dreamworld/';

      var bgs = [
        'http://media.pldh.net/gallery/the493/bulbasaur.jpg',
        'http://media.pldh.net/gallery/the493/charmander.jpg',
        'http://media.pldh.net/gallery/the493/squirtle.jpg'
      ];

      var pkmn = 'http://media.pldh.net/dreamworld/';
      var pkmns = [
        'http://media.pldh.net/dreamworld/001.png',
        'http://media.pldh.net/dreamworld/004.png',
        'http://media.pldh.net/dreamworld/007.png'
      ];

      var widgetIframe = $('#sc-widget')[0];
      var widget = SC.Widget( widgetIframe );

      var url = "https://soundcloud.com/nintendoprogamer/pokemon-trainer-red-epic-remix";

      widget.load(url, {
        show_artwork: false,
        auto_play: true,
        buying: false,
        liking: false,
        download: false,
        sharing: false,
        show_comments: false,
        show_playcount: false,
        show_user: false
      });

      //$('#sc-widget').hide();

      function createImage(src, id) {
        var img = new Image();
        img.src = src;
        img.id = id;
        img.style.display = 'none';
        img.style.overflow = 'hidden';
        return img;
      }

      var bs = $('#bg_slideshow');
      var ps = $('#pkmns_slideshow');

      var currentBG = null;
      var currentPKMN = null;

      var firstTime = true;

      function timeout() {
        setTimeout(function() {
          loop();
          timeout();
        }, (counter  < 1) ? 500 : 4000);
      }
      timeout();


      var counter = -1;
      function loop() {
        if (counter > names.length) {
          counter -= names.length;
        }
        // BG
        if (currentBG) {
          currentBG.hide('slide', { direction: 'left' }, 1500, function() {
            this.remove();
          });
        }
        
        currentBG = $('#' + 'bgID_' + counter);
        currentBG.show('slide', { direction: 'right' }, 1500);

        // PKMN
        if (currentPKMN) {
          var that = currentPKMN;
          currentPKMN.animate({
            left: "+" + window.innerWidth
          }, {
            duration: 2000,
            specialEasing: {
              width: 'easeInOutCubic'
            }
          }, function() {
            that.remove();
          });
        }

        currentPKMN = $('#' + 'pkmnID_' + counter);
        var w = currentPKMN.width();
        currentPKMN.css({top: '10%', left: -w});
        currentPKMN.show();
        currentPKMN.animate({
          left: "+" + (window.innerWidth / 8)
        }, {
            duration: 2200,
            specialEasing: {
              width: 'easeInOutCubic'
            }
          });
        //currentPKMN.show('slide', { direction: 'left' }, 2000);

        // prebuffer next frames
        var img, ahead;
        ahead = counter + 1;
        img = createImage( bg_root + names[ahead] + ".jpg", 'bgID_' + ahead );
        bs.append(img);
        img = createImage( pkmn_root + zstr(ahead + 1) + (ahead + 1) + ".png", 'pkmnID_' + ahead );
        ps.append(img);

        counter++;
      };

      function zstr(n) {
        var z = '';
        if (n < 10)
          z += '0';
        if (n < 100)
          z += '0';
        return z;
      }

    })();
  </script>
</body>
</html>