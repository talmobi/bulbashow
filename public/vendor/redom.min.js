(function(e,v){"object"===typeof exports&&"undefined"!==typeof module?v(exports):"function"===typeof define&&define.amd?define(["exports"],v):v(e.redom={})})(this,function(e){function v(a,c,b){for(var d=0;d<c.length;d++){var g=c[d];if(g){var q=f(g);q===b?b=b.nextSibling:q&&q.nodeType?h(a,g,b):null!=g.length&&(b=v(a,g,b))}}return b}var z=function(a,c){for(var b,d=null,g=b=null,q=0,e=0,f=0;f<=a.length;f++){var k=a.charCodeAt(f),r=35===k,n=46===k;k=!k;if(r||n||k)0===q?d=0===f?"div":a.substring(e,f):
1===q?b=a.substring(e,f):g=g?g+(" "+a.substring(e,f)):a.substring(e,f),r?q=1:n&&(q=2),e=f+1}a=d;a=c?document.createElementNS(c,a):document.createElement(a);b&&(a.id=b);g&&(c?a.setAttribute("class",g):a.className=g);return a},l=function(a,c){a=f(a);var b=f(c);c===b&&b.__redom_view&&(c=b.__redom_view);b.parentNode&&(L(c,b,a),a.removeChild(b));return c},L=function(a,c,b){a=c.__redom_lifecycle;if(M(a))c.__redom_mounted=!1;else for(c.__redom_mounted&&A(c,"onunmount");b;){c=b.__redom_lifecycle||{};for(var d in a)c[d]&&
(c[d]-=a[d]);M(c)&&(b.__redom_lifecycle=null);b=b.parentNode}},M=function(a){if(null==a)return!0;for(var c in a)if(a[c])return!1;return!0},N=["onmount","onunmount"],Q="undefined"!==typeof window&&"ShadowRoot"in window,h=function(a,c,b){var d=f(a);a=f(c);c===a&&a.__redom_view&&(c=a.__redom_view);c!==a&&(a.__redom_view=c);var g=a.parentNode;a.__redom_mounted&&g!==d&&L(c,a,g);null!=b?d.insertBefore(a,f(b)):d.appendChild(a);var e=c;b=a.__redom_lifecycle||(a.__redom_lifecycle={});g=d===g;for(var m=!1,
h=0;h<N.length;h++){var k=N[h];!g&&e!==a&&k in e&&(b[k]=(b[k]||0)+1);b[k]&&(m=!0)}if(m){e=!1;if(g||!e&&d&&d.__redom_mounted)A(a,g?"onremount":"onmount"),e=!0;if(!g)for(;d;){a=d.parentNode;m=d.__redom_lifecycle||(d.__redom_lifecycle={});for(var r in b)m[r]=(m[r]||0)+b[r];!e&&(d===document||Q&&d instanceof window.ShadowRoot||a&&a.__redom_mounted)&&(A(d,g?"onremount":"onmount"),e=!0);d=a}}else a.__redom_mounted=!0;return c},A=function(a,c){"onmount"===c?a.__redom_mounted=!0:"onunmount"===c&&(a.__redom_mounted=
!1);var b=a.__redom_lifecycle;if(b){var d=a.__redom_view,g=0;d&&d[c]&&d[c]();for(var e in b)e&&g++;if(g)for(a=a.firstChild;a;)b=a.nextSibling,A(a,c),a=b}},E=function(a,c,b){a=f(a);if(void 0!==b)a.style[c]=b;else if(w(c))a.setAttribute("style",c);else for(var d in c)E(a,d,c[d])},F=function(a,c,b){a=f(a);var d=a instanceof SVGElement;if(void 0!==b)if("style"===c)E(a,b);else if(d&&x(b))a[c]=b;else if("dataset"===c)for(var g in b)a.dataset[g]=b[g];else if(!d&&(c in a||x(b)))a[c]=b;else if(d&&"xlink"===
c)for(var e in b)a.setAttributeNS("http://www.w3.org/1999/xlink",e,b[e]);else a.setAttribute(c,b);else for(var m in c)F(a,m,c[m])},G=function(a){return document.createTextNode(null!=a?a:"")},H=function(a,c){for(var b=0;b<c.length;b++){var d=c[b];if(0===d||d)if("function"===typeof d)d(a);else if(w(d)||"number"===typeof d)a.appendChild(G(d));else{var e=f(d);e&&e.nodeType?h(a,d):d.length?H(a,d):"object"===typeof d&&F(a,d)}}},O=function(a){return w(a)?p(a):f(a)},f=function(a){return a.nodeType&&a||!a.el&&
a||f(a.el)},w=function(a){return"string"===typeof a},x=function(a){return"function"===typeof a},B={},p=function(a){for(var c=[],b=arguments.length-1;0<b--;)c[b]=arguments[b+1];if(w(a))b=(B[a]||(B[a]=z(a))).cloneNode(!1);else if(a&&a.nodeType)b=a.cloneNode(!1);else if(x(a))b=new (Function.prototype.bind.apply(a,[null].concat(c)));else throw Error("At least one argument required");H(f(b),c);return b};p.extend=function(a){for(var c=[],b=arguments.length-1;0<b--;)c[b]=arguments[b+1];b=B[a]||(B[a]=z(a));
return p.bind.apply(p,[this,b].concat(c))};var I=function(a){for(var c=[],b=arguments.length-1;0<b--;)c[b]=arguments[b+1];b=f(a);for(c=v(a,c,b.firstChild);c;)b=c.nextSibling,l(a,c),c=b},R=function(a){return function(c){return c[a]}},C=function(a,c,b){this.View=a;this.initData=b;this.oldLookup={};this.lookup={};this.oldViews=[];this.views=[];null!=c&&(this.lookup={},this.key=x(c)?c:R(c))};C.prototype.update=function(a,c){for(var b=this.View,d=this.key,e=this.initData,q=null!=d,m=this.lookup,h={},k=
Array(a.length),r=this.views,n=0;n<a.length;n++){var l=a[n];if(q){var p=d(l);var t=m[p]||new b(e,l,n,a);h[p]=t;t.__redom_id=p}else t=r[n]||new b(e,l,n,a);t.update&&t.update(l,n,a,c);f(t.el).__redom_view=t;k[n]=t}this.oldViews=r;this.views=k;this.oldLookup=m;this.lookup=h};var P=function(a,c,b,d){return new u(a,c,b,d)},u=function(a,c,b,d){this.__redom_list=!0;this.View=c;this.initData=d;this.views=[];this.pool=new C(c,b,d);this.el=O(a);this.keySet=null!=b};u.prototype.update=function(a,c){void 0===
a&&(a=[]);var b=this.keySet,d=this.views,e=b&&this.lookup;this.pool.update(a,c);c=this.pool;a=c.views;c=c.lookup;if(b)for(var f=0;f<d.length;f++){var h=d[f].__redom_id;h in c||l(this,e[h])}I(this,a);b&&(this.lookup=c);this.views=a};u.extend=function(a,c,b,d){return u.bind(u,a,c,b,d)};P.extend=u.extend;var J=function(a,c){this.el=G("");this.visible=!1;this.view=null;this._placeholder=this.el;a instanceof Node?this._el=a:this._View=a;this._initData=c};J.prototype.update=function(a,c){var b=this._placeholder,
d=this.el.parentNode;if(a){if(!this.visible){if(this._el){h(d,this._el,b);l(d,b);this.el=this._el;this.visible=a;return}var e=new this._View(this._initData);this.el=f(e);this.view=e;h(d,e,b);l(d,b)}this.view&&this.view.update&&this.view.update(c)}else if(this.visible){if(this._el){h(d,b,this._el);l(d,this._el);this.el=b;this.visible=a;return}h(d,b,this.view);l(d,this.view);this.el=b;this.view=null}this.visible=a};var K=function(a,c,b){this.el=O(a);this.Views=c;this.initData=b};K.prototype.update=
function(a,c){if(a!==this.route){var b=this.Views[a];this.route=a;this.view=b&&new b(this.initData,c);I(this.el,[this.view])}this.view&&this.view.update&&this.view.update(c,a)};var D={},y=function(a){for(var c=[],b=arguments.length-1;0<b--;)c[b]=arguments[b+1];if(w(a))b=(D[a]||(D[a]=z(a,"http://www.w3.org/2000/svg"))).cloneNode(!1);else if(a&&a.nodeType)b=a.cloneNode(!1);else if(x(a))b=new (Function.prototype.bind.apply(a,[null].concat(c)));else throw Error("At least one argument required");H(f(b),
c);return b};y.extend=function(a){a=D[a]||(D[a]=z(a,"http://www.w3.org/2000/svg"));return y.bind(this,a)};y.ns="http://www.w3.org/2000/svg";e.el=p;e.h=p;e.html=p;e.list=P;e.List=u;e.listPool=function(a,c,b){return new C(a,c,b)};e.ListPool=C;e.mount=h;e.unmount=l;e.place=function(a,c){return new J(a,c)};e.Place=J;e.router=function(a,c,b){return new K(a,c,b)};e.Router=K;e.setAttr=F;e.setStyle=E;e.setChildren=I;e.s=y;e.svg=y;e.text=G;Object.defineProperty(e,"__esModule",{value:!0})});
